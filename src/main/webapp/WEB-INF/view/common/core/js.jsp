<!--<%@ page contentType="text/html;charset=UTF-8" language="java" %>--><!--[if lte IE 9]>
<script src='${root}/scripts/polyfill-7de1bb1748.js'></script>
<![endif]--><!--[if lte IE 8]>
<script>
document.querySelector(".layout").style.height = (Math.max(document.body.clientHeight,document.documentElement.clientHeight) - 5 * 16) + "px";
</script>
<![endif]--><script src="${root}/lib/libs-10e105d5b2.js"></script><script type="text/javascript" src="${res}/src/scripts/egissdk-hue.1.2.0.js"></script><script type="text/javascript">!function(t){function e(t){var e=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/,a=!0;if(e.test(t)){if(18==t.length){for(var r=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),i=new Array(1,0,10,9,8,7,6,5,4,3,2),n=0,o=0;o<17;o++)n+=t.substring(o,o+1)*r[o];var d=n%11,s=t.substring(17);2==d?a="X"==s||"x"==s:s!=i[d]&&(a=!1)}}else a=!1;return a}_.templateSettings={evaluate:/<@([\s\S]+?)@>/g,interpolate:/<@=([\s\S]+?)@>/g,escape:/<@-([\s\S]+?)@>/g};var a="0.1.5";seajs.config({alias:{ui:"common/ui",util:"common/util",appView:"common/appView",main:"main",echarts:"${res}/lib/echarts/echarts-all",ckeditorJs:"${res}/lib/ckeditor/ckeditor",ckeditorStyle:"${res}/lib/ckeditor/skins/moono/editor.css#"},dir:"${root}/scripts",base:"${root}/scripts",map:[function(t){var e=location.protocol+"//"+location.host+"${root}/scripts/",a=t.replace(e,"");return~"${root}".indexOf("dist")&&/^modules/.test(a)&&!seajs.cache[t]?versionObj[a]?e+versionObj[a]:t.replace(/\/dist\//,"/src/"):t}]});var r=t.rs={staticRoot:"${root}/",apiRoot:"${ctx}/",name:"riskShare",version:a,event:_.extend({},Backbone.Events),receiveMessage:function(t){var e=t.data.split("?"),a=e[1]&&r.util.parseUrlParam(e[1]);r.event.trigger(e[0],a)},JST:{},chartCommonOptions:{title:{textStyle:{fontFamily:"微软雅黑"}},legend:{data:[],textStyle:{fontFamily:"微软雅黑"}},noDataLoadingOption:{textStyle:{fontFamily:"微软雅黑",fontSize:18}}},data:{app:{},page:{}}};r.loadModule=function(t){var e,a=$.Deferred(),t=t||[];return _.isArray(t)||(_.isString(t)&&(t={module:t}),t=[t]),e=t.length,$.each(t,function(t,r){_.isFunction(r.before)&&r.before(),seajs.use(r.module,function(t){var i,n=r.args||[];t&&t.init&&(!_.isArray(n)&&(n=[n]),i=t.init.apply(t,n)),--e||a.resolve(t,i)})}),a},Backbone.emulateHTTP=!0,r.ajax=Backbone.ajax=function(){var t=[].slice.call(arguments,0),e=t[0],a=e.success,r=e.error,i=e.isSelfErrorTip;return e.cache=!1,e.success=function(t,n,o){if("string"==typeof t)try{t=JSON.parse(t)}catch(d){}return void 0!==t.status&&1*t.status!==0?(i?r&&r.call(e.context,o,t.msg||t.message||n,t):seajs.use("util",function(a){a.alert("<span>失败提示</span>",t.msg||t.message,function(){r&&r.call(e.context,o,t.msg||t.message||n,t)},3)}),o):void(a&&a.apply(e.context,arguments))},e.error=function(t,a,n){var o=t.status,d=t.responseText,s={};"abort"!=a&&(0==o&&"error"==a&&(a=" 系统错误"),i&&r&&!~_.indexOf([401,403],o)?r.call(e.context,t,a,n):seajs.use("util",function(t){if(~_.indexOf([401,403],o))try{s=JSON.parse(d)}catch(e){}t.alert("<span>失败提示</span>",s.msg||s.message||o+":"+a,function(){401==o&&location.replace("${ctx}/"),403==o&&history.back()},3)}))},$.ajax.apply($,arguments)},r.ajaxFragment=function(){var t=[].slice.call(arguments,0),e=t[0],a=e.data||(e.data={});return a.fragment=!0,r.ajax.apply(r,arguments)},$.extend($.validator.messages,{required:"不能为空",remote:"请修正此字段",email:"请输入有效的电子邮件地址",url:"请输入有效的网址",date:"请输入有效的日期",dateISO:"请输入有效的日期 (YYYY-MM-DD)",number:"请输入有效的数字",digits:"只能输入数字",creditcard:"请输入有效的信用卡号码",equalTo:"你的输入不相同",extension:"请输入有效的后缀",maxlength:$.validator.format("最多可以输入 {0} 个字符"),minlength:$.validator.format("最少要输入 {0} 个字符"),rangelength:$.validator.format("请输入长度在 {0} 到 {1} 之间的字符串"),range:$.validator.format("请输入范围在 {0} 到 {1} 之间的数值"),max:$.validator.format("请输入不大于 {0} 的数值"),min:$.validator.format("请输入不小于 {0} 的数值")}),$.validator.addMethod("required",function(t,e,a){if(!this.depend(a,e))return"dependency-mismatch";if("select"===e.nodeName.toLowerCase()){var r=$(e).val();return r&&r.length>0}return this.checkable(e)?this.getLength(t,e)>0:$.trim(t).length>0},"不能为空 "),$.validator.addMethod("url",function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},"请输入有效的网址"),$.validator.addMethod("mobile",function(t,e){var a=/^1\d{10}$/;return this.optional(e)||a.test($.trim(t))},"请输入有效的手机号码"),$.validator.addMethod("bankCard",function(t,e){var a=/^\d{16,19}$/;return this.optional(e)||a.test($.trim(t))},"请输入有效的银行卡号"),$.validator.addMethod("pwd",function(t,e){var a=function(t){return!!/^[\S]{8,20}$/.test(t)&&_.map([/\d/,/[a-z]/i,/[!@#\$%\^&\*]/],function(e){return e.test(t)}).reduce(function(t,e){return(0|t)+(0|e)})>1};return this.optional(e)||a(t)},"请输入8~20位的字母、数字、特殊字符中的至少2种组合"),$.validator.addMethod("idCard",function(t,a){return this.optional(a)||e($.trim(t))},"请输入有效身份证号"),$.validator.addMethod("ipv4More",function(t,e){var a=/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i;return this.optional(e)||_.all(t.split(/\r\n|\n|\s+/),function(t){return a.test(t)})},"请输入有效的IP地址."),$.validator.addMethod("idNo",function(t,e){return this.optional(e)||/^[a-z0-9\-]+$/i.test(t)},"请输入正确的证件号"),$.validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^[a-z0-9]+$/i.test(t)},"只能输入字母和数字"),$.validator.addMethod("userName",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},"只能输入字母和数字和下划线"),$.validator.addMethod("decimal",function(t,e){return this.optional(e)||/^\d+(?:\.\d{1,2})?$/i.test(t)},"请输入有效的数值 , 最多保留两位小数"),$.validator.addMethod("memberNo",function(t,e){return this.optional(e)||$(e).attr("memberNo")},"请选择有效机构"),$.validator.addMethod("phoneChina",function(t,e){return this.optional(e)||/^\d{3,4}(?:-)?\d{5,11}(?:-)?\d{3,5}$/i.test($.trim(t))},"请输入有效的电话号码"),$.validator.addMethod("chineseName",function(t,e){return this.optional(e)||/[a-zA-Z]{1,30}|[\u4e00-\u9fa5]{1,30}$/.test(t)},"请输入有效的姓名"),this.addEventListener&&this.addEventListener("message",r.receiveMessage,!1)}(this);</script><script src="${root}/scripts/common-10fb31ba14.js"></script><script>!function(){$("#bind-code-btn").length&&(define("qrcode",function(n){function t(){$.ajax({url:"${ctx}/hue/checkUserBindStatus",dataType:"json",type:"post",success:function(n){n.status&&"Y"==n.status?$("#unbind-code-btn").show():n.status&&"N"==n.status?$("#bind-code-btn").show():($("#unbind-code-btn").show(),$("#bind-code-btn").show())},error:function(n,t,e){$("#unbind-code-btn").show(),$("#bind-code-btn").show()}})}function e(){$.ajax({url:"${ctx}/hue/unbind",dataType:"json",type:"post",success:function(n){$("#unbindEquipmentButton").hide(),$("#unbindEquipmentTip").hide(),0==n.status?(i.alert("提示","解绑成功!"),$("#unbind-code-btn").hide(),$("#bind-code-btn").show()):(i.alert("提示","解绑成功!"),$(".jb-qrcode").empty())},error:function(n,t,e){i.alert("提示","解绑成功!")}})}var i=(n("ui"),n("util"));$("#bind-code-btn").click(function(){$.getJSON("${ctx}/hue/register",{scenarioId:"bindDevice"},function(n){0==n.status?Hue.init({token:n.data.token,backTo:"${appUrl}/#loan-audit/online-audit",businessType:"portal",openType:"_self"}):alert(n.message)})}),$("#unbind-code-btn").click(function(){i.confirm("提示","<p>你的设备与该网站解除绑定，是否确认？</p>",function(){e()})}),t()}),seajs.use("qrcode"))}();</script>